{
  "query": "\nCREATE TABLE IF NOT EXISTS support_tickets (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  ticketNumber VARCHAR(50) NOT NULL UNIQUE,\n  userId INT NOT NULL,\n  userEmail VARCHAR(320) NOT NULL,\n  userName VARCHAR(255) NOT NULL,\n  userRole ENUM('artist', 'venue', 'admin') NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  description TEXT NOT NULL,\n  category ENUM('contracts', 'billing', 'technical', 'account', 'general') NOT NULL,\n  priority ENUM('low', 'medium', 'high', 'urgent') NOT NULL,\n  status ENUM('open', 'in-progress', 'waiting-customer', 'resolved', 'closed') DEFAULT 'open' NOT NULL,\n  assignedTeam VARCHAR(100),\n  assignedTo INT,\n  tags JSON DEFAULT '[]',\n  attachments JSON DEFAULT '[]',\n  responseTimeMinutes INT,\n  resolutionTimeMinutes INT,\n  firstResponseAt TIMESTAMP NULL,\n  resolvedAt TIMESTAMP NULL,\n  slaStatus ENUM('on-track', 'at-risk', 'breached') DEFAULT 'on-track' NOT NULL,\n  slaBreachedAt TIMESTAMP NULL,\n  relatedBookingId INT,\n  relatedContractId INT,\n  internalNotes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  closedAt TIMESTAMP NULL\n);\n\nCREATE TABLE IF NOT EXISTS ticket_responses (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  ticketId INT NOT NULL,\n  userId INT NOT NULL,\n  userName VARCHAR(255) NOT NULL,\n  userRole ENUM('customer', 'support', 'admin') NOT NULL,\n  message TEXT NOT NULL,\n  attachments JSON DEFAULT '[]',\n  isInternal BOOLEAN DEFAULT FALSE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (ticketId) REFERENCES support_tickets(id)\n);\n\nCREATE TABLE IF NOT EXISTS ticket_assignments (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  ticketId INT NOT NULL,\n  assignedTo INT NOT NULL,\n  assignedBy INT NOT NULL,\n  team VARCHAR(100) NOT NULL,\n  priority ENUM('low', 'medium', 'high', 'urgent') NOT NULL,\n  reason TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (ticketId) REFERENCES support_tickets(id)\n);\n\nCREATE TABLE IF NOT EXISTS help_articles (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  articleId VARCHAR(100) NOT NULL UNIQUE,\n  title VARCHAR(255) NOT NULL,\n  summary TEXT NOT NULL,\n  content TEXT NOT NULL,\n  category ENUM('getting-started', 'contracts', 'bookings', 'payments', 'signatures', 'account', 'technical') NOT NULL,\n  difficulty ENUM('beginner', 'intermediate', 'advanced') DEFAULT 'beginner' NOT NULL,\n  keywords JSON DEFAULT '[]',\n  relatedArticles JSON DEFAULT '[]',\n  views INT DEFAULT 0 NOT NULL,\n  helpful INT DEFAULT 0 NOT NULL,\n  unhelpful INT DEFAULT 0 NOT NULL,\n  averageRating INT,\n  estimatedReadTime INT,\n  lastUpdatedBy INT,\n  isPublished BOOLEAN DEFAULT TRUE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS support_metrics (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  date TIMESTAMP NOT NULL,\n  totalTickets INT DEFAULT 0 NOT NULL,\n  openTickets INT DEFAULT 0 NOT NULL,\n  resolvedTickets INT DEFAULT 0 NOT NULL,\n  closedTickets INT DEFAULT 0 NOT NULL,\n  averageResponseTime INT,\n  averageResolutionTime INT,\n  slaComplianceRate INT,\n  slaBreachCount INT DEFAULT 0 NOT NULL,\n  categoryBreakdown JSON DEFAULT '{}',\n  priorityBreakdown JSON DEFAULT '{}',\n  teamMetrics JSON DEFAULT '{}',\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user KrGaEuKwKPW5NAp.root --database mP6FLm6cHUyVdEMNViNuZS --execute \nCREATE TABLE IF NOT EXISTS support_tickets (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  ticketNumber VARCHAR(50) NOT NULL UNIQUE,\n  userId INT NOT NULL,\n  userEmail VARCHAR(320) NOT NULL,\n  userName VARCHAR(255) NOT NULL,\n  userRole ENUM('artist', 'venue', 'admin') NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  description TEXT NOT NULL,\n  category ENUM('contracts', 'billing', 'technical', 'account', 'general') NOT NULL,\n  priority ENUM('low', 'medium', 'high', 'urgent') NOT NULL,\n  status ENUM('open', 'in-progress', 'waiting-customer', 'resolved', 'closed') DEFAULT 'open' NOT NULL,\n  assignedTeam VARCHAR(100),\n  assignedTo INT,\n  tags JSON DEFAULT '[]',\n  attachments JSON DEFAULT '[]',\n  responseTimeMinutes INT,\n  resolutionTimeMinutes INT,\n  firstResponseAt TIMESTAMP NULL,\n  resolvedAt TIMESTAMP NULL,\n  slaStatus ENUM('on-track', 'at-risk', 'breached') DEFAULT 'on-track' NOT NULL,\n  slaBreachedAt TIMESTAMP NULL,\n  relatedBookingId INT,\n  relatedContractId INT,\n  internalNotes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  closedAt TIMESTAMP NULL\n);\n\nCREATE TABLE IF NOT EXISTS ticket_responses (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  ticketId INT NOT NULL,\n  userId INT NOT NULL,\n  userName VARCHAR(255) NOT NULL,\n  userRole ENUM('customer', 'support', 'admin') NOT NULL,\n  message TEXT NOT NULL,\n  attachments JSON DEFAULT '[]',\n  isInternal BOOLEAN DEFAULT FALSE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (ticketId) REFERENCES support_tickets(id)\n);\n\nCREATE TABLE IF NOT EXISTS ticket_assignments (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  ticketId INT NOT NULL,\n  assignedTo INT NOT NULL,\n  assignedBy INT NOT NULL,\n  team VARCHAR(100) NOT NULL,\n  priority ENUM('low', 'medium', 'high', 'urgent') NOT NULL,\n  reason TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (ticketId) REFERENCES support_tickets(id)\n);\n\nCREATE TABLE IF NOT EXISTS help_articles (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  articleId VARCHAR(100) NOT NULL UNIQUE,\n  title VARCHAR(255) NOT NULL,\n  summary TEXT NOT NULL,\n  content TEXT NOT NULL,\n  category ENUM('getting-started', 'contracts', 'bookings', 'payments', 'signatures', 'account', 'technical') NOT NULL,\n  difficulty ENUM('beginner', 'intermediate', 'advanced') DEFAULT 'beginner' NOT NULL,\n  keywords JSON DEFAULT '[]',\n  relatedArticles JSON DEFAULT '[]',\n  views INT DEFAULT 0 NOT NULL,\n  helpful INT DEFAULT 0 NOT NULL,\n  unhelpful INT DEFAULT 0 NOT NULL,\n  averageRating INT,\n  estimatedReadTime INT,\n  lastUpdatedBy INT,\n  isPublished BOOLEAN DEFAULT TRUE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS support_metrics (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  date TIMESTAMP NOT NULL,\n  totalTickets INT DEFAULT 0 NOT NULL,\n  openTickets INT DEFAULT 0 NOT NULL,\n  resolvedTickets INT DEFAULT 0 NOT NULL,\n  closedTickets INT DEFAULT 0 NOT NULL,\n  averageResponseTime INT,\n  averageResolutionTime INT,\n  slaComplianceRate INT,\n  slaBreachCount INT DEFAULT 0 NOT NULL,\n  categoryBreakdown JSON DEFAULT '{}',\n  priorityBreakdown JSON DEFAULT '{}',\n  teamMetrics JSON DEFAULT '{}',\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n",
  "returncode": 1,
  "logs": [
    "ERROR 1101 (42000) at line 2: BLOB/TEXT/JSON column 'tags' can't have a default value"
  ]
}
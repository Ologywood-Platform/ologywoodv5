{
  "query": "CREATE TABLE `certificate_audit_trail` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`certificateId` int NOT NULL,\n\t`contractId` int NOT NULL,\n\t`action` enum('created','verified','expired','revoked','tamper_detected','reissued','archived') NOT NULL,\n\t`performedBy` int,\n\t`details` json,\n\t`ipAddress` varchar(45),\n\t`userAgent` text,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `certificate_audit_trail_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `contract_reminders` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`contractId` int NOT NULL,\n\t`recipientId` int NOT NULL,\n\t`reminderType` enum('signature_pending','signature_request','event_approaching','contract_expiring') NOT NULL,\n\t`daysBeforeEvent` int,\n\t`status` enum('pending','sent','failed','skipped') NOT NULL DEFAULT 'pending',\n\t`sentAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `contract_reminders_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `contract_signing_sessions` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`contractId` int NOT NULL,\n\t`sessionToken` varchar(255) NOT NULL,\n\t`signerRole` enum('artist','venue') NOT NULL,\n\t`signerId` int NOT NULL,\n\t`status` enum('active','completed','expired','cancelled') NOT NULL DEFAULT 'active',\n\t`signatureData` text,\n\t`signedAt` timestamp,\n\t`expiresAt` timestamp NOT NULL,\n\t`ipAddress` varchar(45),\n\t`userAgent` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `contract_signing_sessions_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `contract_signing_sessions_sessionToken_unique` UNIQUE(`sessionToken`)\n);\n\nCREATE TABLE `contract_verification_requests` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`certificateId` int NOT NULL,\n\t`contractId` int NOT NULL,\n\t`requestedBy` int,\n\t`verificationMethod` enum('api','web_interface','email_link','qr_code','manual') NOT NULL,\n\t`result` enum('valid','invalid','expired','tampered') NOT NULL,\n\t`details` json,\n\t`ipAddress` varchar(45),\n\t`userAgent` text,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `contract_verification_requests_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `signature_certificates` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`contractId` int NOT NULL,\n\t`signatureId` int NOT NULL,\n\t`signerName` varchar(255) NOT NULL,\n\t`signerEmail` varchar(320) NOT NULL,\n\t`signerRole` enum('artist','venue') NOT NULL,\n\t`certificateNumber` varchar(50) NOT NULL,\n\t`signatureHash` varchar(64) NOT NULL,\n\t`verificationHash` varchar(128) NOT NULL,\n\t`signedAt` timestamp NOT NULL,\n\t`expiresAt` timestamp NOT NULL,\n\t`issuedAt` timestamp NOT NULL DEFAULT (now()),\n\t`isValid` boolean NOT NULL DEFAULT true,\n\t`tamperDetected` boolean NOT NULL DEFAULT false,\n\t`verificationCount` int NOT NULL DEFAULT 0,\n\t`lastVerifiedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `signature_certificates_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `signature_certificates_certificateNumber_unique` UNIQUE(`certificateNumber`),\n\tCONSTRAINT `signature_certificates_contractId_signerRole_unique` UNIQUE(`contractId`,`signerRole`)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user KrGaEuKwKPW5NAp.root --database mP6FLm6cHUyVdEMNViNuZS --execute CREATE TABLE `certificate_audit_trail` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`certificateId` int NOT NULL,\n\t`contractId` int NOT NULL,\n\t`action` enum('created','verified','expired','revoked','tamper_detected','reissued','archived') NOT NULL,\n\t`performedBy` int,\n\t`details` json,\n\t`ipAddress` varchar(45),\n\t`userAgent` text,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `certificate_audit_trail_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `contract_reminders` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`contractId` int NOT NULL,\n\t`recipientId` int NOT NULL,\n\t`reminderType` enum('signature_pending','signature_request','event_approaching','contract_expiring') NOT NULL,\n\t`daysBeforeEvent` int,\n\t`status` enum('pending','sent','failed','skipped') NOT NULL DEFAULT 'pending',\n\t`sentAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `contract_reminders_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `contract_signing_sessions` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`contractId` int NOT NULL,\n\t`sessionToken` varchar(255) NOT NULL,\n\t`signerRole` enum('artist','venue') NOT NULL,\n\t`signerId` int NOT NULL,\n\t`status` enum('active','completed','expired','cancelled') NOT NULL DEFAULT 'active',\n\t`signatureData` text,\n\t`signedAt` timestamp,\n\t`expiresAt` timestamp NOT NULL,\n\t`ipAddress` varchar(45),\n\t`userAgent` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `contract_signing_sessions_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `contract_signing_sessions_sessionToken_unique` UNIQUE(`sessionToken`)\n);\n\nCREATE TABLE `contract_verification_requests` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`certificateId` int NOT NULL,\n\t`contractId` int NOT NULL,\n\t`requestedBy` int,\n\t`verificationMethod` enum('api','web_interface','email_link','qr_code','manual') NOT NULL,\n\t`result` enum('valid','invalid','expired','tampered') NOT NULL,\n\t`details` json,\n\t`ipAddress` varchar(45),\n\t`userAgent` text,\n\t`timestamp` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `contract_verification_requests_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `signature_certificates` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`contractId` int NOT NULL,\n\t`signatureId` int NOT NULL,\n\t`signerName` varchar(255) NOT NULL,\n\t`signerEmail` varchar(320) NOT NULL,\n\t`signerRole` enum('artist','venue') NOT NULL,\n\t`certificateNumber` varchar(50) NOT NULL,\n\t`signatureHash` varchar(64) NOT NULL,\n\t`verificationHash` varchar(128) NOT NULL,\n\t`signedAt` timestamp NOT NULL,\n\t`expiresAt` timestamp NOT NULL,\n\t`issuedAt` timestamp NOT NULL DEFAULT (now()),\n\t`isValid` boolean NOT NULL DEFAULT true,\n\t`tamperDetected` boolean NOT NULL DEFAULT false,\n\t`verificationCount` int NOT NULL DEFAULT 0,\n\t`lastVerifiedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `signature_certificates_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `signature_certificates_certificateNumber_unique` UNIQUE(`certificateNumber`),\n\tCONSTRAINT `signature_certificates_contractId_signerRole_unique` UNIQUE(`contractId`,`signerRole`)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1221
}